<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="./favicon.ico"><script src="./js/g2plot.min.js"></script><title>Vue2 | 前端基础知识</title><meta name="description" content="整理归类前端各项资料">
    <link rel="modulepreload" href="./assets/app.84c19619.js"><link rel="modulepreload" href="./assets/vue.html.c6ce7c92.js"><link rel="modulepreload" href="./assets/vue.html.6447739b.js">
    <link rel="stylesheet" href="./assets/style.07e10c79.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/./" class=""><img class="logo" src="././img/logo.png" alt="前端基础知识"><span class="site-name can-hide">前端基础知识</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/./base/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础"><span class="title">基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础"><span class="title">基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/./base/base/get-started.md" class="" aria-label="./base/get-started.md"><!--[--><!--]--> ./base/get-started.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/base/css.md" class="" aria-label="./base/css.md"><!--[--><!--]--> ./base/css.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/base/js.md" class="" aria-label="./base/js.md"><!--[--><!--]--> ./base/js.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/base/code.md" class="" aria-label="./base/code.md"><!--[--><!--]--> ./base/code.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/base/more.md" class="" aria-label="./base/more.md"><!--[--><!--]--> ./base/more.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/base/vue.md" class="" aria-label="./base/vue.md"><!--[--><!--]--> ./base/vue.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="经典"><span class="title">经典</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="经典"><span class="title">经典</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/./base/classics/optimize.md" class="" aria-label="./classics/optimize.md"><!--[--><!--]--> ./classics/optimize.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/cache.md" class="" aria-label="./classics/cache.md"><!--[--><!--]--> ./classics/cache.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/run.md" class="" aria-label="./classics/run.md"><!--[--><!--]--> ./classics/run.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/webpack.md" class="" aria-label="./classics/webpack.md"><!--[--><!--]--> ./classics/webpack.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/intbase.md" class="" aria-label="./classics/intbase.md"><!--[--><!--]--> ./classics/intbase.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/browser.md" class="" aria-label="./classics/browser.md"><!--[--><!--]--> ./classics/browser.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/zoom.md" class="" aria-label="./classics/zoom.md"><!--[--><!--]--> ./classics/zoom.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/http.md" class="" aria-label="./classics/http.md"><!--[--><!--]--> ./classics/http.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/interview.md" class="" aria-label="./classics/interview.md"><!--[--><!--]--> ./classics/interview.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/array.md" class="" aria-label="./classics/array.md"><!--[--><!--]--> ./classics/array.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="笔记"><span class="title">笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="笔记"><span class="title">笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/./base/note/app.md" class="" aria-label="./note/app.md"><!--[--><!--]--> ./note/app.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/note/attention.md" class="" aria-label="./note/attention.md"><!--[--><!--]--> ./note/attention.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/note/appbug.md" class="" aria-label="./note/appbug.md"><!--[--><!--]--> ./note/appbug.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/note/vue.md" class="" aria-label="./note/vue.md"><!--[--><!--]--> ./note/vue.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/note/typescript.md" class="" aria-label="./note/typescript.md"><!--[--><!--]--> ./note/typescript.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/note/shun.md" class="" aria-label="./note/shun.md"><!--[--><!--]--> ./note/shun.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="react"><span class="title">react</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="react"><span class="title">react</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/./base/react/note.md" class="" aria-label="./react/note.md"><!--[--><!--]--> ./react/note.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/react/hook.md" class="" aria-label="./react/hook.md"><!--[--><!--]--> ./react/hook.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/react/router3.md" class="" aria-label="./react/router3.md"><!--[--><!--]--> ./react/router3.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/react/decorators.md" class="" aria-label="./react/decorators.md"><!--[--><!--]--> ./react/decorators.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="TS"><span class="title">TS</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="TS"><span class="title">TS</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/./base/typescript/type.md" class="" aria-label="./typescript/type.md"><!--[--><!--]--> ./typescript/type.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/typescript/compile.md" class="" aria-label="./typescript/compile.md"><!--[--><!--]--> ./typescript/compile.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/typescript/oop.md" class="" aria-label="./typescript/oop.md"><!--[--><!--]--> ./typescript/oop.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/cjSound/front-kap.git" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/./base/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础"><span class="title">基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础"><span class="title">基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/./base/base/get-started.md" class="" aria-label="./base/get-started.md"><!--[--><!--]--> ./base/get-started.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/base/css.md" class="" aria-label="./base/css.md"><!--[--><!--]--> ./base/css.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/base/js.md" class="" aria-label="./base/js.md"><!--[--><!--]--> ./base/js.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/base/code.md" class="" aria-label="./base/code.md"><!--[--><!--]--> ./base/code.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/base/more.md" class="" aria-label="./base/more.md"><!--[--><!--]--> ./base/more.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/base/vue.md" class="" aria-label="./base/vue.md"><!--[--><!--]--> ./base/vue.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="经典"><span class="title">经典</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="经典"><span class="title">经典</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/./base/classics/optimize.md" class="" aria-label="./classics/optimize.md"><!--[--><!--]--> ./classics/optimize.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/cache.md" class="" aria-label="./classics/cache.md"><!--[--><!--]--> ./classics/cache.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/run.md" class="" aria-label="./classics/run.md"><!--[--><!--]--> ./classics/run.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/webpack.md" class="" aria-label="./classics/webpack.md"><!--[--><!--]--> ./classics/webpack.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/intbase.md" class="" aria-label="./classics/intbase.md"><!--[--><!--]--> ./classics/intbase.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/browser.md" class="" aria-label="./classics/browser.md"><!--[--><!--]--> ./classics/browser.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/zoom.md" class="" aria-label="./classics/zoom.md"><!--[--><!--]--> ./classics/zoom.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/http.md" class="" aria-label="./classics/http.md"><!--[--><!--]--> ./classics/http.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/interview.md" class="" aria-label="./classics/interview.md"><!--[--><!--]--> ./classics/interview.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/classics/array.md" class="" aria-label="./classics/array.md"><!--[--><!--]--> ./classics/array.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="笔记"><span class="title">笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="笔记"><span class="title">笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/./base/note/app.md" class="" aria-label="./note/app.md"><!--[--><!--]--> ./note/app.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/note/attention.md" class="" aria-label="./note/attention.md"><!--[--><!--]--> ./note/attention.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/note/appbug.md" class="" aria-label="./note/appbug.md"><!--[--><!--]--> ./note/appbug.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/note/vue.md" class="" aria-label="./note/vue.md"><!--[--><!--]--> ./note/vue.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/note/typescript.md" class="" aria-label="./note/typescript.md"><!--[--><!--]--> ./note/typescript.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/note/shun.md" class="" aria-label="./note/shun.md"><!--[--><!--]--> ./note/shun.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="react"><span class="title">react</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="react"><span class="title">react</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/./base/react/note.md" class="" aria-label="./react/note.md"><!--[--><!--]--> ./react/note.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/react/hook.md" class="" aria-label="./react/hook.md"><!--[--><!--]--> ./react/hook.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/react/router3.md" class="" aria-label="./react/router3.md"><!--[--><!--]--> ./react/router3.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/react/decorators.md" class="" aria-label="./react/decorators.md"><!--[--><!--]--> ./react/decorators.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="TS"><span class="title">TS</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="TS"><span class="title">TS</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/./base/typescript/type.md" class="" aria-label="./typescript/type.md"><!--[--><!--]--> ./typescript/type.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/typescript/compile.md" class="" aria-label="./typescript/compile.md"><!--[--><!--]--> ./typescript/compile.md <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./base/typescript/oop.md" class="" aria-label="./typescript/oop.md"><!--[--><!--]--> ./typescript/oop.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/cjSound/front-kap.git" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="vue2" tabindex="-1"><a class="header-anchor" href="#vue2" aria-hidden="true">#</a> Vue2</h1><h2 id="对于mvvm的理解" tabindex="-1"><a class="header-anchor" href="#对于mvvm的理解" aria-hidden="true">#</a> 对于MVVM的理解</h2><ul><li>Model 代表数据模型，也可以在 Model 中定义数据修改和操作的业务逻辑。</li><li>View 代表 UI 组件，它负责将数据模型转化成 UI 展现出来。</li><li>ViewModel 监听模型数据的改变和控制视图⾏为、处理⽤户交互，简单理解就是⼀个同步View 和 Model 的对象，连接 Model 和 View</li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>在 MVVM 架构下， View 和 Model 之间并没有直接的联系，⽽是通过ViewModel 进⾏交互， Model 和 ViewModel 之间的交互是双向的， 因此 View 数据的变化会同步到Model中，⽽Model 数据的变化也会⽴即反应到 View 上。</li><li>ViewModel 通过双向数据绑定把 View 层和 Model 层连接了起来，⽽ View 和 Model 之间的同步⼯作完全是⾃动的，⽆需⼈为⼲涉，因此开 发者只需关注业务逻辑，不需要⼿动操作DOM，不需要关注数据状态的同 步问题，复杂的数据状态维护完全由 MVVM 来统⼀管理</li></ul></div><h2 id="❤slot是什么-有什么作用-原理是什么" tabindex="-1"><a class="header-anchor" href="#❤slot是什么-有什么作用-原理是什么" aria-hidden="true">#</a> ❤slot是什么？有什么作用？原理是什么？</h2><ul><li>slot的出现是为了父组件可以堂而皇之地在子组件中加入内容。</li><li>slot又分三类，默认插槽，具名插槽和作用域插槽。 <ul><li>默认插槽：又名匿名插槽，没有设置name属性的插槽。一个组件内只有有一个匿名插槽。</li><li>具名插槽：带有name属性的slot，一个组件可以出现多个具名插槽。</li><li>如果父组件想要传递多个标签内容，可以使用<code>&lt;template&gt;</code>包裹 且用v-slot指令指定子组件中的具名插槽的位置， v-slot 只能添加在 <code>&lt;template&gt; </code>上 v-slot:default 指向默认插槽 作用域插槽：在子组件渲染作用域插槽时，可以将子组件内部的数据传递给父组件，让父组件根据子组件的传递过来的数据决定如何渲染该插槽。 在子组件的坑（插槽）里绑定数据<code>&lt;slot :数据名=“数据名”&gt;&lt;/slot&gt;</code> 绑定在<code> &lt;slot&gt;</code> 元素上的 属性childData被称为插槽 prop。 父组件需要通过<code>&lt;template slot-scope=”接收数据的别名”&gt;</code> 作用域插槽也可以配置名字</li></ul></li></ul><h2 id="请详细说下你对vue生命周期的理解" tabindex="-1"><a class="header-anchor" href="#请详细说下你对vue生命周期的理解" aria-hidden="true">#</a> 请详细说下你对vue⽣命周期的理解</h2><ul><li><p>答：总共分为8个阶段创建前/后，载⼊前/后，更新前/后，销毁前/后</p></li><li><p>创建前/后： 在 beforeCreate 阶段， vue 实例的挂载元素 el 和数据对象 data 都为undefined ，还未初始化。在 created 阶段， vue 实例的数据对象 data 有了，el还没有</p></li><li><p>载⼊前/后：在 beforeMount 阶段， vue 实例的 $el 和 data 都初始化了，但还是挂载之前为虚拟的 dom 节点， data.message 还未替换。在 mounted 阶段， vue 实例挂载完成， data.message 成功渲染。</p></li><li><p>更新前/后：当 data 变化时，会触发 beforeUpdate 和 updated ⽅法</p></li><li><p>销毁前/后：在执⾏ destroy ⽅法后，对 data 的改变不会再触发周期函数，说明此时vue 实例已经解除了事件监听以及和 dom 的绑定，但是 dom 结构依然存在</p></li></ul><h3 id="什么是vue生命周期" tabindex="-1"><a class="header-anchor" href="#什么是vue生命周期" aria-hidden="true">#</a> 什么是vue⽣命周期？</h3><p>Vue 实例从创建到销毁的过程，就是⽣命周期。从开始创建、初始化数据、编译模 板、挂载Dom→渲染、更新→渲染、销毁等⼀系列过程，称之为 Vue 的⽣命周期。</p><h3 id="vue生命周期的作用是什么" tabindex="-1"><a class="header-anchor" href="#vue生命周期的作用是什么" aria-hidden="true">#</a> vue⽣命周期的作⽤是什么？</h3><p>它的⽣命周期中有多个事件钩⼦，让我们在控制整个Vue实例的过程时更容易形成好的 逻辑</p><h3 id="vue生命周期总共有几个阶段" tabindex="-1"><a class="header-anchor" href="#vue生命周期总共有几个阶段" aria-hidden="true">#</a> vue⽣命周期总共有⼏个阶段？</h3><p>它可以总共分为 8 个阶段：创建前/后、载⼊前/后、更新前/后、销毁前/销毁后。</p><h3 id="第一次⻚面加载会触发哪几个钩子" tabindex="-1"><a class="header-anchor" href="#第一次⻚面加载会触发哪几个钩子" aria-hidden="true">#</a> 第⼀次⻚⾯加载会触发哪⼏个钩⼦</h3><p>会触发下⾯这⼏个 beforeCreate 、 created 、 beforeMount 、 mounted 。</p><h3 id="dom-渲染在哪个周期中就已经完成" tabindex="-1"><a class="header-anchor" href="#dom-渲染在哪个周期中就已经完成" aria-hidden="true">#</a> DOM 渲染在哪个周期中就已经完成</h3><p>DOM 渲染在 mounted 中就已经完成了</p><h2 id="vue实现数据双向绑定的原理-object-defineproperty" tabindex="-1"><a class="header-anchor" href="#vue实现数据双向绑定的原理-object-defineproperty" aria-hidden="true">#</a> Vue实现数据双向绑定的原理：Object.defineProperty()</h2><ul><li>vue 实现数据双向绑定主要是：采⽤数据劫持结合发布者-订阅者模式的⽅式，通过Object.defineProperty() 来劫持各个属性的 setter ， getter ，在数据变动时发布消息给订阅者，触发相应监听回调。当把⼀个普通 Javascript 对象传给 Vue 实例来作为它的 data 选项时，Vue 将遍历它的属性，⽤ Object.defineProperty() 将它们转为 getter/setter 。⽤户看不到 getter/setter ，但是在内部它们让 Vue 追踪依赖，在属性被访问和修改时通知变化。</li><li>vue的数据双向绑定 将 MVVM 作为数据绑定的⼊⼝，整合 Observer ， Compile 和Watcher 三者，通过 Observer 来监听⾃⼰的 model 的数据变化，通过 Compile 来解析编译模板指令（ vue 中是⽤来解析  ），最终利⽤ watcher 搭起 observer 和Compile 之间的通信桥梁，达到数据变化 —&gt;视图更新；视图交互变化（ input ）—&gt;数据 model 变更双向绑定效果。</li></ul><h2 id="vue组件间的参数传递" tabindex="-1"><a class="header-anchor" href="#vue组件间的参数传递" aria-hidden="true">#</a> Vue组件间的参数传递</h2><p>⽗组件与⼦组件传值</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>⽗组件传给⼦组件：⼦组件通过 props ⽅法接受数据</li></ul></div><ul><li>⼦组件传给⽗组件： $emit ⽅法传递参数</li></ul><p>⾮⽗⼦组件间的数据传递，兄弟组件传值</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>eventBus ，就是创建⼀个事件中⼼，相当于中转站，可以⽤它来传递事件和 接收事件。项⽬⽐较⼩时，⽤这个⽐较合适（虽然也有不少⼈推荐直接⽤ VUEX ，具体来说看需求）</p></div><h2 id="vue的路由实现-hash模式-和-history模式" tabindex="-1"><a class="header-anchor" href="#vue的路由实现-hash模式-和-history模式" aria-hidden="true">#</a> Vue的路由实现：hash模式 和 history模式</h2><ul><li>hash 模式：在浏览器中符号 “#” ，#以及#后⾯的字符称之为 hash ，⽤ <strong>window.location.hash</strong> 读取。 <ul><li>特点： hash 虽然在 URL 中，但不被包括在 HTTP 请求中；⽤来指导浏览器动作，对服务端安全⽆⽤，</li><li>hash 不会重加载⻚⾯。</li></ul></li><li>history 模式：history 采⽤ HTML5 的新特性；且提供了两个新⽅法：<strong>pushState() ， replaceState()</strong> 可以对浏览器历史记录栈进⾏修改，以及 popState事件的监听到状态变更</li></ul><h2 id="路由原理" tabindex="-1"><a class="header-anchor" href="#路由原理" aria-hidden="true">#</a> 路由原理</h2><blockquote><p>前端路由实现起来其实很简单，本质就是监听 URL 的变化，然后匹配路由规则，显示相应的⻚⾯，并且⽆须刷新。⽬前单⻚⾯使⽤的路由就只有两种实现⽅式</p></blockquote><div class="custom-container tip"><p class="custom-container-title">hash</p><p>www.test.com/##/ 就是 Hash URL ，当 ## 后⾯的哈希值发⽣变化时， 不会向服务器请求数据，可以通过 <strong>hashchange</strong> 事件来监听到 URL 的变 化，从⽽进⾏跳转⻚⾯。</p></div><div class="custom-container tip"><p class="custom-container-title">History</p><p>History 模式是 HTML5 新推出的功能，⽐之 Hash URL 更加美观</p></div><h2 id="vue路由的钩子函数" tabindex="-1"><a class="header-anchor" href="#vue路由的钩子函数" aria-hidden="true">#</a> vue路由的钩⼦函数</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>⾸⻚可以控制导航跳转， beforeEach ， afterEach 等，⼀般⽤于⻚⾯ title 的修改。⼀些需要登录才能调整⻚⾯的重定向功能。</p></div><ul><li>beforeEach 主要有3个参数 to ， from ， next 。</li><li>to ： route 即将进⼊的⽬标路由对象。</li><li>from ： route 当前导航正要离开的路由。</li><li>next ： function ⼀定要调⽤该⽅法 resolve 这个钩⼦。执⾏效果依赖n ext ⽅法的调⽤参数。可以控制⽹⻚的跳转</li></ul><h2 id="vuex是什么-怎么使用-哪种功能场景使用它" tabindex="-1"><a class="header-anchor" href="#vuex是什么-怎么使用-哪种功能场景使用它" aria-hidden="true">#</a> vuex是什么？怎么使⽤？哪种功能场景使⽤它？</h2><ul><li><p>只⽤来读取的状态集中放在 store 中； 改变状态的⽅式是提交 mutations ，这是个同步的事务； 异步逻辑应该封装在 action 中。</p></li><li><p>在 main.js 引⼊ store ，注⼊。新建了⼀个⽬录 store ， … export</p></li><li><p>场景有：单⻚应⽤中，组件之间的状态、⾳乐播放、登录状态、加⼊购物⻋</p></li><li><p><strong>state</strong> ： Vuex 使⽤单⼀状态树,即每个应⽤将仅仅包含⼀个 store 实例，但单⼀状态树和模块化并不冲突。存放的数据状态，不可以直接修改⾥⾯的数据。</p></li><li><p><strong>mutations</strong> ：<strong>同步</strong> mutations 定义的⽅法动态修改 Vuex 的 store 中的状态或数据</p></li><li><p><strong>getters</strong> ：类似 vue 的计算属性，主要⽤来过滤⼀些数据。</p></li><li><p><strong>action</strong> ： actions 可以理解为通过将 mutations ⾥⾯处⾥数据的⽅法变成可异步的处理数据的⽅法，简单的说就是<strong>异步</strong>操作数据。 view 层通过 store.dispath 来分发action</p></li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p><strong>modules</strong> ：项⽬特别复杂的时候，可以让每⼀个模块拥有⾃⼰的 state 、 mutation 、 action 、 getters ，使得结构⾮常清晰，⽅便管理</p></div><h2 id="route-和-router-的区别" tabindex="-1"><a class="header-anchor" href="#route-和-router-的区别" aria-hidden="true">#</a> $route 和 $router 的区别</h2><ul><li>$route 是 <strong>“路由信息对象”</strong>，包括 path ， params ， hash ， query ，fullPath ， matched ， name 等路由信息参数。</li><li>⽽ $router 是“路由实例”对象包括了路由的跳转⽅法，钩⼦函数等</li></ul><h2 id="keep-alive-keep-alive-的作用是什么" tabindex="-1"><a class="header-anchor" href="#keep-alive-keep-alive-的作用是什么" aria-hidden="true">#</a> <code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code> 的作⽤是什么</h2><p><code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code> 包裹动态组件时，会缓存不活动的组件实例,主要⽤于保留 组件状态或避免重新渲染</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>⽐如有⼀个列表和⼀个详情，那么⽤户就会经常执⾏打开详情=&gt;返回列表=&gt; 打开详情…这样的话列表和详情都是⼀个频率很⾼的⻚⾯，那么就可以对列表 组件使⽤<code> &lt;keep-alive&gt;&lt;/keep-alive&gt;</code> 进⾏缓存，这样⽤户每次返回列表的 时候，都能从缓存中快速渲染，⽽不是重新渲染</p></div><h2 id="❤nexttick原理" tabindex="-1"><a class="header-anchor" href="#❤nexttick原理" aria-hidden="true">#</a> ❤NextTick原理</h2><p>nextTick 中的回调是在下次 DOM 更新循环结束之后执行的延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。主要思路就是采用微任务优先的方式调用异步方法去执行 nextTick 包装的方法</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> callbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">flushCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//把标志还原为false</span>
  <span class="token comment">// 依次执行回调</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> callbacks<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    callbacks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> timerFunc<span class="token punctuation">;</span> <span class="token comment">//定义异步方法  采用优雅降级</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Promise <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果支持promise</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> MutationObserver <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// MutationObserver 主要是监听dom变化 也是一个异步方法</span>
  <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>textNode<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">characterData</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    counter <span class="token operator">=</span> <span class="token punctuation">(</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span>
    textNode<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> setImmediate <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果前面都不支持 判断setImmediate</span>
  <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setImmediate</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// 最后降级采用setTimeout</span>
  <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 除了渲染watcher  还有用户自己手动调用的nextTick 一起被收集到数组</span>
  callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果多次调用nextTick  只会执行一次异步 等异步队列清空之后再把标志变为false</span>
    pending <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token function">timerFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h2 id="vue-组件-data-为什么必须是函数" tabindex="-1"><a class="header-anchor" href="#vue-组件-data-为什么必须是函数" aria-hidden="true">#</a> Vue 组件 data 为什么必须是函数</h2><ul><li>每个组件都是 Vue 的实例。</li><li>组件共享 data 属性，当 data 的值是同⼀个引⽤类型的值时，改变其中⼀个会影响其他</li></ul><h2 id="❤vue-computed-实现" tabindex="-1"><a class="header-anchor" href="#❤vue-computed-实现" aria-hidden="true">#</a> ❤Vue computed 实现</h2><ul><li>建⽴与其他属性（如： data 、 Store ）的联系；</li><li>属性改变后，通知计算属性重新计算</li><li>初始化 data ， 使⽤ Object.defineProperty 把这些属性全部转为getter/setter 。</li><li>初始化 computed , 遍历 computed ⾥的每个属性，每个 computed 属性都是⼀个watch 实例。每个属性提供的函数作为属性的 getter ，使⽤Object.defineProperty 转化。</li><li>Object.defineProperty getter 依赖收集。⽤于依赖发⽣变化时，触发属性重新计算。</li><li>若出现当前 computed 计算属性嵌套其他 computed 计算属性时，先进⾏其他的依赖收集</li></ul><h2 id="❤vue-complier-实现" tabindex="-1"><a class="header-anchor" href="#❤vue-complier-实现" aria-hidden="true">#</a> ❤Vue complier 实现</h2><ul><li>模板解析这种事，本质是将数据转化为⼀段 html ，最开始出现在后端，经过各种处理吐给前端。随着各种 mv* 的兴起，模板解析交由前端处理。</li><li>总的来说， Vue complier 是将 <strong>template</strong> 转化成⼀个 <strong>render</strong> 字符串。</li><li>步骤 <ul><li>parse 过程，将 template 利⽤正则转化成 <strong>AST</strong> 抽象语法树。</li><li>optimize 过程，标记静态节点，后 <strong>diff</strong> 过程跳过静态节点，提升性能。</li><li><strong>generate</strong> 过程，⽣成 render 字符串</li></ul></li></ul><h2 id="❤key工作原理-说说对它的理解" tabindex="-1"><a class="header-anchor" href="#❤key工作原理-说说对它的理解" aria-hidden="true">#</a> ❤key工作原理，说说对它的理解</h2><p>可以唯一确定一个dom元素，从而执行diff算法更高效</p><ul><li>1、key的作用主要是为了高效的更新虚拟DOM，其原理是vue在patch过程中通过key可以精准的判断两个节点是否是同一个，从而避免频繁更新不同元素，使得整个patch过程更加高效，减少了dom的操作量，提高性能</li><li>2、如果不设置key可能在列表更新时引发一些隐藏的bug 比如说<strong>更新和不更新看不出来</strong>。</li><li>3、vue中在使用相同标签名元素的过渡切换是，也会用到key属性，其目的也是为了让vue可以区分他们，否则vue只会替换其内部属性而不会触发过渡效果。需要用key来作为唯一性的判断。</li></ul><h2 id="❤vue中的diff算法" tabindex="-1"><a class="header-anchor" href="#❤vue中的diff算法" aria-hidden="true">#</a> ❤vue中的diff算法</h2><ul><li>必要性：diff算法能精确的比较新旧虚拟DOM中的key的变化，从而提高更新效率</li><li>执行方式：深度优先，同级比较</li><li>高效性：查看源码得知</li><li>1、diff算法是虚拟DOM技术的必然产物：通过新旧虚拟DOM做对比（既diff），将变化的地方更新在真实DOM上，另外，也需要diff高效的执行对比过程，从而降低时间复杂度为O（n）</li><li>2、vue2.0x中为了降低watcher粒度，每个组件只有一个watcher与之对应，只有引入diff才能精确的找到发生变化的地方</li><li>3、vue中diff执行的时刻是组件实例执行更新函数时，它会对比与上一次渲染结果oldVnode和新的渲染结果，此过程称为patch</li><li>4、diff过程整体遵循深度优先，同层次比较的策略，两个节点之间比较会根据他们是否拥有子节点或者文本节点做不同操作，比较两组子节点是算法重点，首先假设头部节点可能相同做4次对比尝试，如果没有找到同节点才按照通用的方式去进行遍历查找，查找结束再按情况处理剩下的节点，借助key通常可以非常精确找到相同节点，因此整个patch过程非常高效。</li></ul><h2 id="virtual-dom" tabindex="-1"><a class="header-anchor" href="#virtual-dom" aria-hidden="true">#</a> Virtual Dom</h2><p>为什么需要 Virtual Dom</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>众所周知，操作 DOM 是很耗费性能的⼀件事情，既然如此，我们可以考虑通 过 JS 对象来模拟 DOM 对象，毕竟操作 JS 对象⽐操作 DOM 省时的多</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 假设这⾥模拟⼀个 ul，其中包含了 5 个 li</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token comment">// 这⾥替换上⾯的 li</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>从上述例⼦中，我们⼀眼就可以看出先前的 ul 中的第三个 li 被移除了， 四五替换了位置。</p></div><ul><li>如果以上操作对应到 <strong>DOM</strong> 中，那么就是以下代码</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 删除第三个 li</span>
ul<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 将第四个 li 和第五个交换位置</span>
<span class="token keyword">let</span> fromNode <span class="token operator">=</span> ul<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> toNode <span class="token operator">=</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> cloneFromNode <span class="token operator">=</span> fromNode<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> cloenToNode <span class="token operator">=</span> toNode<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
ul<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>cloneFromNode<span class="token punctuation">,</span> toNode<span class="token punctuation">)</span>
ul<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>cloenToNode<span class="token punctuation">,</span> fromNode<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>当然在实际操作中，我们还需要给每个节点⼀个标识，作为判断是同⼀个节点的依据。所以这也是 Vue 和 React 中官⽅推荐列表⾥的节点使⽤唯⼀的<strong>key</strong> 来保证性能。</p></div><ul><li>那么既然 DOM 对象可以通过 JS 对象来模拟，反之也可以通过 JS 对象来渲染出对应的 DOM</li><li>以下是⼀个 JS 对象<strong>模拟 DOM</strong> 对象的简单实现</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Element</span> <span class="token punctuation">{</span>
 <span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">tag</span> &#39;div&#39;
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Object<span class="token punctuation">}</span></span> <span class="token parameter">props</span> <span class="token punctuation">{</span> class: &#39;item&#39; <span class="token punctuation">}</span>
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Array<span class="token punctuation">}</span></span> <span class="token parameter">children</span> [ Element1, &#39;text&#39;]
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>String<span class="token punctuation">}</span></span> <span class="token parameter">key</span> option
 */</span>
 <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> props<span class="token punctuation">,</span> children<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tag <span class="token operator">=</span> tag
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> children
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> children
        <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key
 <span class="token punctuation">}</span>
 <span class="token comment">// 渲染</span>
 <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_createElement</span><span class="token punctuation">(</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tag<span class="token punctuation">,</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>children<span class="token punctuation">,</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>key
    <span class="token punctuation">)</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
    <span class="token keyword">return</span> root
 <span class="token punctuation">}</span>
 <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_createElement</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tag<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>children<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>key<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// 创建节点</span>
 <span class="token function">_createElement</span><span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> props<span class="token punctuation">,</span> child<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过 tag 创建节点</span>
    <span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span>
    <span class="token comment">// 设置节点属性</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> value <span class="token operator">=</span> props<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
            el<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 递归添加⼦节点</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        child<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> child
            <span class="token keyword">if</span> <span class="token punctuation">(</span>element <span class="token keyword">instanceof</span> <span class="token class-name">Element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                child <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_createElement</span><span class="token punctuation">(</span>
                    element<span class="token punctuation">.</span>tag<span class="token punctuation">,</span>
                    element<span class="token punctuation">.</span>props<span class="token punctuation">,</span>
                    element<span class="token punctuation">.</span>children<span class="token punctuation">,</span>
                    element<span class="token punctuation">.</span>key
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                child <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> el
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><h3 id="virtual-dom-算法简述" tabindex="-1"><a class="header-anchor" href="#virtual-dom-算法简述" aria-hidden="true">#</a> Virtual Dom 算法简述</h3><ul><li>既然我们已经通过 JS 来模拟实现了 DOM ，那么接下来的难点就在于如何判断旧的对象和新的对象之间的差异。</li><li>DOM 是多叉树的结构，如果需要完整的对⽐两颗树的差异，那么需要的时间复杂度会是<strong>O(n ^ 3)</strong> ，这个复杂度肯定是不能接受的。于是 React 团队优化了算法，实现了O(n) 的复杂度来对⽐差异。</li><li>实现 O(n) 复杂度的关键就是只对⽐同层的节点，⽽不是跨层对⽐，这也是考虑到在实际业务中很少会去跨层的移动 DOM 元素</li><li>所以判断差异的算法就分为了两步 <ul><li>⾸先从上⾄下，从左往右遍历对象，也就是树的深度遍历，这⼀步中会给每个节点添加索引，便于最后渲染差异</li><li>⼀旦节点有⼦元素，就去判断⼦元素是否有不同</li></ul></li></ul><h3 id="virtual-dom-算法实现" tabindex="-1"><a class="header-anchor" href="#virtual-dom-算法实现" aria-hidden="true">#</a> Virtual Dom 算法实现</h3><p>树的递归</p><ul><li>⾸先我们来实现树的递归算法，在实现该算法前，先来考虑下两个节点对⽐会有⼏种情况</li><li>新的节点的 tagName 或者 key <strong>和旧的不同</strong>，这种情况代表需要替换旧的节点，并且也不再需要遍历新旧节点的⼦元素了，因为整个旧节点都被删掉了</li><li>新的节点的 tagName 和 key （可能都没有）和旧的相同，开始遍历⼦树</li><li>没有新的节点，那么什么都不⽤做</li></ul><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 876304802@qq.com">cjSound</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="./assets/app.84c19619.js" defer></script>
  </body>
</html>
